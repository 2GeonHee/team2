<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>geonhui page</title>
        <!--firebase code for comment section-->
        <script type="module">
            import {initializeApp} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
            import {getFirestore} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import {collection, addDoc} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            import {getDocs} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
            const firebaseConfig = {
                apiKey: "AIzaSyAPPAejmUo3r5MkdVQJ_QM-DTV9D5Eoz3A",
                authDomain: "sparta-3feb2.firebaseapp.com",
                projectId: "sparta-3feb2",
                storageBucket: "sparta-3feb2.appspot.com",
                messagingSenderId: "752340315911",
                appId: "1:752340315911:web:81edd76d5bec133bb7dfa2",
                measurementId: "G-27HSNSXK65"
            };
            // Firebase 인스턴스 초기화
            const app = initializeApp(FirebaseConfig);
            const db = getFirestore(app);
            const spring = await getDocs(collection(db, "Sehun"));
            console.log(spring);
            // 넣s
            $("#savebtn").click(async function () {
                let question = $("#question").val();
                let name = $("#name").val();
                let doc = {
                    'question': question,
                    'name': name
                };
                await addDoc(collection(db, "Sehun"), doc);
                alert("댓글이 작성되었습니다");
                console.log("작동 확인");
                window
                    .location
                    .reload();
            })

            let docs = await getDocs(collection(db, "Sehun"));
            docs.forEach((doc) => {
                let row = doc.data();
                console.log("작동중");
                let question = row["question"];
                let name = row["name"];
                let temp_html = `<h5>${name}</h5>
    <p>${question}</p><br>
    `;
                $(`#questions`).append(temp_html);
            });
        </script>
        <!--Linkd-->
        <link rel="stylesheet" href="../css/post.css">
        <link rel="stylesheet" href="../css/sehun.css">
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
            crossorigin="anonymous">
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>
    </head>
    <body>

        <header class="p-3 text-bg-dark">
            <div class="container">
                <div
                    class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                    <a
                        href="/"
                        class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                        <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                            <use xlink:href="#bootstrap"></use>
                        </svg>
                    </a>

                    <ul
                        class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                        <li>
                            <a href="index.html" class="nav-link px-2 text-secondary">Home</a>
                        </li>
                        <li>
                            <a href="wanhui.html" class="nav-link px-2 text-white">공완희</a>
                        </li>
                        <li>
                            <a href="hyoil.html" class="nav-link px-2 text-white">이효일</a>
                        </li>
                        <li>
                            <a href="geonhui.html" class="nav-link px-2 text-white">이건희</a>
                        </li>
                        <li>
                            <a href="sehun.html" class="nav-link px-2 text-white">방세훈</a>
                        </li>
                    </ul>

                    <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                        <input
                            type="search"
                            class="form-control form-control-dark text-bg-dark"
                            placeholder="Search..."
                            aria-label="Search">
                    </form>

                    <div class="text-end">
                        <button type="button" class="btn btn-outline-light me-2">Login</button>
                        <button type="button" class="btn btn-warning">Sign-up</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="posting">
            <div class="card mb-3">
                <div class="profile">
                    <div class="imgbox">
                        <img src="../images/gh.jpg" class="card-img-top" alt="개인사진">
                    </div>
                    <ul>
                        <li>
                            <span>이름</span>이건희</li>
                        <li>
                            <span>주소</span>대한민국 경상북도 경산시</li>
                        <li>
                            <span>취미</span>루미큐브, 코딩(?)</li>
                        <li>
                            <span>mbti</span>entj</li>
                        <li>
                            <span>관심사</span>고양이</li>
                        <li>
                            <span>블로그</span>https://2geonh.tistory.com/</li>
                        <li>
                            <span>한마디</span>나의 오류는 너의 오류</li>
                    </ul>
                </div>

                <div class="card-body">
                    <h4 class="card-title">소개</h4>
                    <p class="card-text">
                        <p>안녕하세요. Spring4기를 함께하게 된 이건희입니다.<br>
                            mbti e지만 살~짝 과묵과묵한 성격이에요. 그렇다고 말을 못하는건 아니니 모두들 친하게 지내보아요!
                            <br>
                            백엔드 개발 비전공자로, 처음 접하게 된 것들이 많은데 부족하지만 팀원들과 같이 발을 맞출 수 있도록 노력하겠습니다. 잘 부탁드립니다</p>
                    </div>
                </div>

                <button
                    type="button"
                    class="btn btn-dark"
                    id="home"
                    onclick="location.href='./index.html'">뒤로가기</button>
            </div>

            <!-- 댓글 창 -->
            <div style="width: 78%; border: solid 1px black;margin: auto;">
                <div class="input">
                    <div class="input1">
                        <label for="exampleFormControlTextarea1" class="form-label">이름</label>
                        <textarea
                            id="exampleFormControlTextarea1"
                            class="form-control"
                            rows="8"
                            style="resize: none;width: 100px; height: 20px;"></textarea>
                        <label for="exampleFormControlTextarea1" class="form-label">댓글 작성하기</label>
                        <textarea
                            id="exampleFormControlTextarea1"
                            class="form-control"
                            rows="8"
                            style="resize: none;width: 100; height: 100%;"></textarea>
                        <button
                            id="savebtn"
                            type="button"
                            class="btn btn-secondary"
                            style="height: 40px;">보내기</button>
                    </div>
                </div>
                <div class="textbox">
                    <h3>댓글</h3><br><br>
                    <div class="textbox" id="questions"></div>
                    <!------form-------->
                </div>
            </div>
        </div>

    </body>
</html>